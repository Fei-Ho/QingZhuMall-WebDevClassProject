<!DOCTYPE html>
<html>
<head lang="en">
	<meta charset="utf-8" />
	<title>cart</title>
	<script src="manager_static/vue.js"></script>
	<link rel="stylesheet" type="text/css" href="css/public.css"/>
	<link rel="stylesheet" type="text/css" href="css/proList.css" />
	<!-- reset.css是清楚我页面的默认样式 -->
	<link rel="stylesheet" href="css/reset.css">
	<!-- 二级页面的公共样式代码 -->
	<link rel="stylesheet" href="css/common.css">
	<!-- 页面的独有样式 -->
	<link rel="stylesheet" href="css/index_qinzhu.css">
	<script src="js/jquery-1.12.4.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/public.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/pro.js" type="text/javascript" charset="utf-8"></script>
	<script src="js/cart.js" type="text/javascript" charset="utf-8"></script>

</head>
<body>
<div id="app">

<!------------------------------head------------------------------>
<div class="header">
	<div class="header_c inner_c">
		<h1 class="logo">
			青竹商城
		</h1>
		<dl class = "allType">
			<dt><a href="#">查看所有类型</a></dt>
			<dd>
				<div class = "dd_inn">
					<ul class = "dd_cont">
						<li><a href="#">不锈钢</a></li>
						<li><a href="#">原料水泥</a></li>
						<li><a href="#">塑料</a></li>
						<li><a href="#">木质</a></li>
						<li><a href="#">陶瓷</a></li>
					</ul>
					<ul class="pro">
						<li>
							<a href="#">
								<div class="pic">
									<img src="images/img25.png" alt="">
								</div>
								<div class="content">
									<h3>简约木质餐盘</h3>
									<span>￥200</span>
								</div>
							</a>
							<div class="mask">
								<a href="#" class = "btn">查看详情</a>
							</div>
						</li>
						<li>
							<a href="#">
								<div class="pic">
									<img src="images/img26.png" alt="">
								</div>
								<div class="content">
									<h3>简约木质餐盘</h3>
									<span>￥200</span>
								</div>
							</a>
							<div class="mask">
								<a href="#" class = "btn">查看详情</a>
							</div>
						</li>
						<li>
							<a href="#">
								<div class="pic">
									<img src="images/img27.png" alt="">
								</div>
								<div class="content">
									<h3>简约木质餐盘</h3>
									<span>￥200</span>
								</div>
							</a>
							<div class="mask">
								<a href="#" class = "btn">查看详情</a>
							</div>
						</li>
					</ul>
				</div>
			</dd>
		</dl>
		<ul class="nav">
			<li><a href="index.html">首页</a></li>
			<li><a href="allproducts.html">所有产品</a></li>
			<li><a href="blog.html">博客</a></li>
			<li><a href="article.html">文章列表</a></li>
		</ul>
		<a href="#" class="search"></a>
		<div class="reg">
			<div class="ico">
				<span class = "ico_c"></span>
				<div class="settle">
					<p class="con">0件商品 共计：<span>￥0</span></p>
					<a href="cart" class="btn">结算</a>
				</div>
				<span class = "con">
							0
						</span>
			</div>
			<div class = "reg_c">
				<a href="land.html" id="">登陆</a>
				<span>&nbsp;|&nbsp;</span>
				<a href="registe.html">注册</a>
			</div>
		</div>
	</div>
</div>

<div class="cart mt">
	<!-----------------logo------------------->
	<!--<div class="logo">
        <h1 class="wrapper clearfix">
            <a href="index.html"><img class="fl" src="img/temp/logo.png"></a>
            <img class="top" src="img/temp/cartTop01.png">
        </h1>
    </div>-->
	<!-----------------site------------------->
	<div class="site">
		<p class=" wrapper clearfix">
			<span class="fl">购物车</span>
			<img class="top" src="img/temp/cartTop01.png">
			<a href="index.html" class="fr">继续购物&gt;</a>
		</p>
	</div>
	<!-----------------table------------------->
	<table class="table wrapper">
		<thead class="tr">
			<tr>
				<th style="width: 300px;text-align: center">商品</th>
				<th style="width: 200px;text-align: center">单价</th>
				<th style="width: 200px;text-align: center">数量</th>
				<th style="width: 200px;text-align: center">小计</th>
				<th style="width: 200px;text-align: center">操作</th>
			</tr>
		</thead>
		<tbody >
			<tr v-for="(item, index) in tableData"  class="th">
				<td class="pro clearfix" style="text-align: center;min-width: 30vw">
					<label class="fl">
						<input type="checkbox" :id="index" :value="index" v-model="checkedItems"/>
						<span></span>
					</label>
					<a class="fl">
						<dl class="clearfix">
							<dt class="fl"><img src="img/temp/cart01.jpg"></dt>
							<dd class="fl">
								<p>{{item.good.goodsName}}</p>
								<p>{{item.good.detail}}</p>
							</dd>
						</dl>
					</a>
				</td>
				<td class="price" style="width: 180px;text-align: center">￥{{item.good.goodsPrice}}</td>
				<td class="number" style="width: 300px;text-align: center">
					<p class="num clearfix">
						<img class="fl sub" src="img/temp/sub.jpg">
						<span class="fl">{{item.goodsNum}}</span>
						<img class="fl add" src="img/temp/add.jpg">
					</p>
				</td>
				<td class="price sAll" style="width: 150px;text-align: center">￥{{item.totalPrice}}</td>
				<td class="price" style="width: 150px;text-align: center"><a class="del" href="#2">删除</a></td>
			</tr>
		</tbody>
	</table>
	<div class="goOn" style="text-align: center;width: 500px;margin:15px; font-size: 16px">空空如也~<a href="index.html" style="color: #4685EC">去逛逛</a></div>
	<div class="tr clearfix" style="margin: 15px;font-size: 16px">
		<!--<label class="fl" style="text-align: right;width: 200px;">-->
			<!--<input class="checkAll" type="checkbox"/>-->
			<!--<span></span>-->
		<!--</label>-->
		<!--<p class="fl">-->
			<!--<a href="#">全选</a>-->
			<!---->
			<!--<a href="#" class="del" style="color: red">删除</a>-->
	</p>
	<p class="fr" style="text-align:left;width: 350px">
		<span>共<small id="sl">{{checkedNum}}</small>件商品</span>
		<span>合计:&nbsp;<small id="all">￥{{totalPrice}}</small></span>
		<a href="order.html"  class="count" @click="order">结算</a>
		<!---->
	</p>
</div>
</div>
<div class="mask"></div>
<div class="tipDel">
	<p>确定要删除该商品吗？</p>
	<p class="clearfix">
		<a class="fl cer" href="#">确定</a>
		<a class="fr cancel" href="#">取消</a>
	</p>
</div>

<!-- footer部分开始 -->
<div class="footer">
	<div class="footer_c inner_c">
		<div class="footer_top">
			<div class="bir">
				<a href="#">
					<img src="images/logo.png" alt="">
				</a>
				<div class="info">
					青竹良品原创生活类电商品牌，秉承一贯的严谨态度，我们深入世界各地，从源头全程严格把控商品生产环节，力求帮消费者甄选到最优质的商品，全线采用天然原材料，控制甲醛低量无害，采用进口工艺，国际生产线不断优化，食材保证核心原产地新鲜直供，让你享受品质生活
				</div>
			</div>
			<div class="about">
				<dl>
					<dt>
						<a href="#">
							关于我们
						</a>
					</dt>
					<dd>
						<a href="#">
							我的品牌
						</a>
					</dd>
					<dd>
						<a href="#">
							公司动态
						</a>
					</dd>
					<dd>
						<a href="#">
							经历发展
						</a>
					</dd>
					<dd>
						<a href="#">
							商品推广
						</a>
					</dd>
				</dl>
				<dl>
					<dt>
						<a href="#">
							关于我们
						</a>
					</dt>
					<dd>
						<a href="#">
							我的品牌
						</a>
					</dd>
					<dd>
						<a href="#">
							公司动态
						</a>
					</dd>
					<dd>
						<a href="#">
							经历发展
						</a>
					</dd>
					<dd>
						<a href="#">
							商品推广
						</a>
					</dd>
				</dl>
				<dl>
					<dt>
						<a href="#">
							关于我们
						</a>
					</dt>
					<dd>
						<a href="#">
							我的品牌
						</a>
					</dd>
					<dd>
						<a href="#">
							公司动态
						</a>
					</dd>
					<dd>
						<a href="#">
							经历发展
						</a>
					</dd>
					<dd>
						<a href="#">
							商品推广
						</a>
					</dd>
				</dl>
			</div>
			<div class="ewm">
				<p class="wx">
					<img src="images/img71.png" alt="">
					<span>微信公众号</span>
				</p>
				<p class="wb">
					<img src="images/img72.png" alt="">
					<span>微博公众号</span>
				</p>
			</div>
		</div>
	</div>
	<div class="footer_bar">
		<div class="footer_bar_c inner_c">
			<div class = "pay">
				<p class = "copy">
					2019 © youhaosuda.com
				</p>
				<p class = "ico">
					<a href="#">
						<img src="images/img81.png" alt="">
					</a>
					<a href="#">
						<img src="images/img82.png" alt="">
					</a>
					<a href="#">
						<img src="images/img83.png" alt="">
					</a>
					<a href="#">
						<img src="images/img84.png" alt="">
					</a>
					<a href="#">
						<img src="images/img85.png" alt="">
					</a>
					<a href="#">
						<img src="images/img86.png" alt="">
					</a>
					<a href="#">
						<img src="images/img87.png" alt="">
					</a>
				</p>
			</div>
			<div class="super">
				<a href="#" class = "pic1">

				</a>
				<a href="#" class = "pic2">

				</a>
				<a href="#" class = "pic3">

				</a>
			</div>
		</div>
	</div>
</div>
<!-- 返回顶部 -->
<div class="lingpin_top">
	<a href="#" class = "qq">QQ<br/>客服</a>
	<a href="#" class = "wx">微信<br/>客服</a>
	<a href="#" class = "top_c">↑</a>
</div>

<!----------------mask------------------->
<div class="mask"></div>
<!-------------------mask内容------------------->
<div class="proDets">
	<img class="off" src="img/temp/off.jpg" />
	<div class="proCon clearfix">
		<div class="proImg fr">
			<img class="list" src="img/temp/proDet.jpg"  />
			<div class="smallImg clearfix">
				<img src="img/temp/proDet01.jpg" data-src="img/temp/proDet01_big.jpg">
				<img src="img/temp/proDet02.jpg" data-src="img/temp/proDet02_big.jpg">
				<img src="img/temp/proDet03.jpg" data-src="img/temp/proDet03_big.jpg">
				<img src="img/temp/proDet04.jpg" data-src="img/temp/proDet04_big.jpg">
			</div>
		</div>
		<div class="fl">
			<div class="proIntro change">
				<p>颜色分类</p>
				<div class="smallImg clearfix">
					<p class="fl on"><img src="img/temp/prosmall01.jpg" alt="白瓷花瓶+20支快乐花" data-src="img/temp/proBig01.jpg"></p>
					<p class="fl"><img src="img/temp/prosmall02.jpg" alt="白瓷花瓶+20支兔尾巴草" data-src="img/temp/proBig02.jpg"></p>
					<p class="fl"><img src="img/temp/prosmall03.jpg" alt="20支快乐花" data-src="img/temp/proBig03.jpg"></p>
					<p class="fl"><img src="img/temp/prosmall04.jpg" alt="20支兔尾巴草" data-src="img/temp/proBig04.jpg"></p>
				</div>
			</div>
			<div class="changeBtn clearfix">
				<a href="#2" class="fl"><p class="buy">确认</p></a>
				<a href="#2" class="fr"><p class="cart">取消</p></a>
			</div>
		</div>
	</div>
</div>
<div class="pleaseC">
	<p>请选择宝贝</p>
	<img class="off" src="img/temp/off.jpg" />
</div>


</div>
</body>
</html>
<script type="text/javascript">
    var vue = new Vue({
        beforeCreate : function() {
            $.ajax({
                //几个参数需要注意一下
                type: "POST",//方法类型
                dataType: "json",//预期服务器返回的数据类型
                url: "http://192.168.43.164:8080/qingzhu/admin/getcartsofuser" ,//url
                // url: "http://47.98.52.193:9090/spring/qingzhu/typedata",
                contentType:"application/x-www-form-urlencoded",
                data: {userId: 1},
                // beforeSend: function(request) {
                //     request.setRequestHeader("Access-Control-Allow-Origin", "*");
                // },
                success: function (result) {
                    console.log(result.extend.carts);
                    vue.tableData = result.extend.carts

                },
                error : function() {
                    alert("异常！");
                }
            })
        },
        el: "#app",
        data: {
            checkedItems:[],
            tableData: [],
			checkedNum:0,
			totalPrice:0
        },
        methods: {
			order: function () {
                window.sessionStorage.clear();
			    var dataList = [];
			    var total = 0;
			    // console.log((vue.tableData[1].good).goodsName);
				// console.log(vue.checkedItems);
                this.checkedItems.forEach(function (item, index, array){
				    // console.log(index);
				    console.log((vue.tableData[item].good).goodsName);
					dataList.push(vue.tableData[item]);
					total += vue.tableData[item].totalPrice;
				});
                window.sessionStorage.setItem("total", total.toString());
                window.sessionStorage.setItem("data", JSON.stringify(dataList));
            }

        },
        watch:{
            checkedItems: function (newList, oldList) {
				console.log(newList);
                vue.totalPrice = 0;
				newList.forEach(function (item, index, array) {
                	vue.totalPrice += vue.tableData[item].totalPrice;
                });
                vue.checkedNum = newList.length;
            }
		}
    })
</script>

<style type="text/css">

</style>

